{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0">Database Connection</h4>
            </div>
            <div class="card-body">
                {% if error %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endif %}
                
                <form method="POST">
                    <div class="mb-3">
                        <label for="db_type" class="form-label">Database Type</label>
                        <select class="form-select" id="db_type" name="db_type" required>
                            <option value="postgresql">PostgreSQL</option>
                            <option value="mysql">MySQL</option>
                            <option value="sqlite">SQLite</option>
                        </select>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="db_host" class="form-label">Host</label>
                                <input type="text" class="form-control" id="db_host" name="db_host" value="localhost" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="db_port" class="form-label">Port</label>
                                <input type="text" class="form-control" id="db_port" name="db_port" value="5432">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="db_name" class="form-label">Database Name</label>
                        <input type="text" class="form-control" id="db_name" name="db_name" required>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="db_user" class="form-label">Username</label>
                                <input type="text" class="form-control" id="db_user" name="db_user" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="db_password" class="form-label">Password</label>
                                <input type="password" class="form-control" id="db_password" name="db_password">
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">Connect & Load Schema</button>
                </form>
            </div>
        </div>
        
        <div class="mt-4">
            <div class="alert alert-info">
                <h6>How it works:</h6>
                <ul class="mb-0">
                    <li>Connect to your database to automatically extract schema information</li>
                    <li>Schema is stored using vector embeddings for efficient retrieval</li>
                    <li>Only relevant tables/columns are used for SQL generation</li>
                    <li>Supports PostgreSQL, MySQL, and SQLite</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}